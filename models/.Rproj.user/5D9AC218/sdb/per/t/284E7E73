{
    "collab_server" : "",
    "contents" : "library(deSolve)\nlibrary(zoo)\nlibrary(\"Rcpp\")\nlibrary(\"BH\")\n\n##############################################################################################################################\n#Assumptions\n#load params from value_gender4_v3.R and p1, p2 from graphs.R\n#source(\"C:/Users/ahauser/Documents/Step2/dtg/value_gender4_v4.R\")\nsource(\"value_gender4_v4.R\")\np1=c(rate1_inf=3.318999e+00, rate2_inf=5.440886e-01, rate1_diag=2.736363e+02, rate2_diag=7.710578e+00, rate_treat=1.879695e-03,rate_death=1.632000e-01)\np2=c(rate1_inf=NA, rate2_inf=NA, rate1_diag=NA, rate2_diag=NA, rate_treat=NA,rate_death=NA,q=0.05,rate_ratio=0.5,k1=1,k2=2,k3=2,alpha=2,rate_res=5,rate_susc=125)\n#no treatment interruption\nparams<-within(params,{\n  # RateStopTreatFirst=4.35/c(Inf,Inf,Inf,Inf)\n  # RateStopSuppFirst=4.35/c(Inf,Inf,Inf,Inf)\n  # RateStopFailFirst=4.35/c(Inf,Inf,Inf,Inf)\n  # RateStopTreatSecond=4.35/c(Inf,Inf,Inf,Inf) #Assumption : T2 same as T1\n  # RateStopSuppSecond=4.35/c(Inf,Inf,Inf,Inf)\n  # RateStopFailSecond=4.35/c(Inf,Inf,Inf,Inf)\n})\n#no starting with second-line PI\nparams<-within(params,{\n  #RateDirectTreatSecond=4.35/c(5000,12000,13000,1850)\n  RateTreatSecond=4.35/c(531,427,294,189)*1/5\n  RateDirectTreatSecond=c(0,0,0,0)\n})\n#Resistance parameters\np2[\"alpha\"]=2\np2[\"alpha2\"]=2\n\np2[\"alpha\"]=2.64\np2[\"alpha2\"]=4.9\n\n##############################################################################################################################\n#different dtg prescription levels in women\ndtg_women1=0.175 #above 50\ndtg_women2=0.63 #above 50 or using contraception\ntreat_dtgb=c(p_w_start=0,p_w_switch=0,rate_first=0,rate_switch=0,p_treat=0,p_supp=0,p_fail=0,delay_first=0,delay_switch=0)\ntreat_dtg1=c(p_w_start=0,p_w_switch=0,rate_first=1,rate_switch=0,p_treat=0,p_supp=0,p_fail=0,delay_first=0,delay_switch=0)\ntreat_dtg2=c(p_w_start=dtg_women1,p_w_switch=0,rate_first=1,rate_switch=0,p_treat=0,p_supp=0,p_fail=0,delay_first=0,delay_switch=0)\ntreat_dtg3=c(p_w_start=dtg_women2,p_w_switch=0,rate_first=1,rate_switch=0,p_treat=0,p_supp=0,p_fail=0,delay_first=0,delay_switch=0)\ntreat_dtg4=c(p_w_start=1,p_w_switch=0,rate_first=1,rate_switch=0,p_treat=0,p_supp=0,p_fail=0,delay_first=0,delay_switch=0)\n#switch also treat and suppressed\ntreat_dtg5=c(p_w_start=0,p_w_switch=0,rate_first=1,rate_switch=1,p_treat=1,p_supp=1,p_fail=1,delay_first=0,delay_switch=0)\ntreat_dtg6=c(p_w_start=dtg_women1,p_w_switch=dtg_women1,rate_first=1,rate_switch=1,p_treat=1,p_supp=1,p_fail=1,delay_first=0,delay_switch=0)\ntreat_dtg7=c(p_w_start=dtg_women2,p_w_switch=dtg_women2,rate_first=1,rate_switch=1,p_treat=1,p_supp=1,p_fail=1,delay_first=0,delay_switch=0)\ntreat_dtg8=c(p_w_start=1,p_w_switch=1,rate_first=1,rate_switch=1,p_treat=1,p_supp=1,p_fail=1,delay_first=0,delay_switch=0)\ntreat_dtg9=c(p_w_start=0.99,p_w_switch=0.99,rate_first=1,rate_switch=1,p_treat=1,p_supp=1,p_fail=1,delay_first=0,delay_switch=0)\ntreat_dtg_mat=rbind(treat_dtgb,treat_dtg1,treat_dtg2,treat_dtg3,treat_dtg4,treat_dtg5,treat_dtg6,treat_dtg7,treat_dtg8,treat_dtg9)\n\n##############################################################################################################################\n#Functions and dataset\n# source(\"C:/Users/ahauser/Documents/Step1/Rfiles/used scripts/marisa/parmin4_v3.R\")\n# sourceCpp(\"C:/Users/ahauser/Documents/Step2/dtg/solvdiff_cpp_dtg_2_2018.cpp\")\n# load(\"C:/Users/ahauser/Documents/Step2/R_results/params.set.RData\")\n# load(\"C:/Users/ahauser/Documents/Step2/R_results/data_dtg_2005_2018.RData\")\nsource(\"parmin4_v3.R\")\n#sourceCpp(\"solvdiff_cpp_dtg_2_2018.cpp\")\nload(\"params.set.RData\")\n#load(\"data_dtg_2005_2018.RData\") #load data\n#xstart_dtg_2_2018=data[dim(data)[1],]\n#ARGS\nargs=(commandArgs(TRUE))\nargs=as.numeric(unlist(args))\nprint(args)\n\n\n\nsourceCpp(\"solvdiff_cpp_dtg_2_2005.cpp\")\nxstart_dtg_2_2005=xstart_f_dtg_2(p2,treat_dtgb)\ntheta=p1\nprint(xstart_dtg_2_2005)\ndata=my_fun10_solver2_dtg_2(xstart_dtg_2_2005,theta,treat_dtgb,params,p2)\nscen=1\n#sourceCpp(\"C:/Users/ahauser/Documents/Step2/dtg/solvdiff_cpp_dtg_2_2018.cpp\")\nsourceCpp(\"solvdiff_cpp_dtg_2_2018.cpp\")\nxstart_dtg_2_2018=data[dim(data)[1],]\nxstart=xstart_dtg_2_2018\nxstart[select_15(2:5,1:4,1:2,2)]=treat_dtg_mat[scen,1]*(xstart[select_15(12:15,1:4,1:2,2)])\nxstart[select_15(12:15,1:4,1:2,2)]=(1-treat_dtg_mat[scen,1])*(xstart[select_15(12:15,1:4,1:2,2)])\nxstart=c(xstart,xstart_dtg_2_2018[241:250])\nprint(xstart)\nmy_fun10_solver2_dtg_2\ndata1=my_fun10_solver2_dtg_2(xstart,theta,treat_dtg_mat[scen,],params,p2)\nrownames(data1)=1:(dim(data1)[1])\ndata1=rbind(data[-dim(data)[1],],data1)\n\nsave(data1,file=\"list_data.RData\")",
    "created" : 1557914860738.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "417202371",
    "id" : "284E7E73",
    "lastKnownWriteTime" : 1557923053,
    "last_content_update" : 1557923053928,
    "path" : "~/Step2/dtg/dtg_sens_ub_test.R",
    "project_path" : "dtg_sens_ub_test.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 18,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}